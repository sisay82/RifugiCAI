<form style="position:relative" [formGroup]="geoForm">
    <div [hidden]="!displayError" class="alert alert-danger">Invalid!</div>
    <div class="bc-h6 bc-geographic-title">Posizione</div>
    <div style="display:flex;flex-direction:row">
        <div class="bc-geographic-input">
            <bc-text-input formControlName="locality" title="Località" [displayError]="displayError"></bc-text-input>
        </div>
        <div class="bc-geographic-input">
            <bc-text-input formControlName="authorityJurisdiction" title="Ente Sovracomunale di Competenza" [displayError]="displayError"></bc-text-input>
        </div>
    </div>
    <div style="display:flex;flex-direction:row">
        <div class="bc-geographic-input">
            <bc-text-input formControlName="municipality" title="Comune" [displayError]="displayError"></bc-text-input>
        </div>
        <div class="bc-geographic-input">
            <bc-text-input formControlName="massif" title="Gruppo Montuoso" [displayError]="displayError"></bc-text-input>
        </div>
    </div>
    <div style="display:flex;flex-direction:row">
        <div class="bc-geographic-input">
            <bc-text-input formControlName="province" title="Provincia" [displayError]="displayError"></bc-text-input>
        </div>
        
        <div class="bc-geographic-input">
            <bc-text-input formControlName="valley" title="Valle" [displayError]="displayError"></bc-text-input>
        </div>
    </div>
    <div style="display:flex;flex-direction:row">
        <div class="bc-geographic-input">
            <bc-text-input formControlName="region" title="Regione" [displayError]="displayError"></bc-text-input>
        </div>   
        <div class="bc-geographic-input">
            <bc-text-input formControlName="altitude" title="Quota" validator="numberValidator" [displayError]="displayError"></bc-text-input>
        </div>
    </div>
    <div style="display:flex;flex-direction:row">
        <div class="bc-geographic-input">     
            <bc-text-input formControlName="ownerRegion" title="Regione loc. Proprietà" [displayError]="displayError"></bc-text-input>   
            <br>
        </div>
        <div class="bc-geographic-input">
            <div class="bc-body" style="white-space: nowrap">UTM WGS84</div>
            <div style="display:flex;flex-direction:row">
                <div>
                    <bc-text-input formControlName="latitude" validator="numberValidator" [displayError]="displayError"></bc-text-input>
                </div>
                <div>
                    <bc-text-input formControlName="longitude" validator="numberValidator" [displayError]="displayError"></bc-text-input>
                </div>
            </div>
        </div>  
    </div>
    <bc-divider></bc-divider>
    <div class="bc-geographic-title bc-h6">Informazioni Aggiuntive</div>
    <div style="position:relative">
        <div *ngIf="data!=undefined&&data.tags!=undefined" formArrayName="tags">
            <div *ngFor="let tag of geoForm.controls.tags.controls;let i = index">
                <div [formGroupName]="i" style="display:flex;flex-direction:row;align-items:center">
                    <div class="bc-geographic-input">
                        <bc-text-input formControlName="key" [displayError]="displayError"></bc-text-input>
                    </div>
                    <div class="bc-geographic-input">
                        <bc-text-input formControlName="value" [displayError]="displayError"></bc-text-input>
                    </div>
                    <bc-icon (click)="removeTag(i)" class="bc-add-tag" name="times" size=s></bc-icon>
                    <br>
                </div>
            </div>
        </div>
        <br>
   </div>
</form>
<div (click)="toggleTag()" class="bc-body bc-add-tag" style="display:inline;white-space:nowrap;flex:1">
    <bc-icon class="bc-add-tag" name="plus" size=s></bc-icon>
    Aggiungi Attributo
</div>
<div *ngIf="!isHiddenTag()">
    <form [formGroup]="newTagForm">
        <div style="display:flex;flex-direction:row;align-items:center">
            <div class="bc-geographic-input">
                <bc-text-input formControlName="newKey" [displayError]="displayError"></bc-text-input>
            </div>
            <div class="bc-geographic-input">
                <bc-text-input formControlName="newValue" [displayError]="displayError"></bc-text-input>
            </div>
            <bc-icon (click)="addNewTag()" class="bc-add-tag" name="check" size=s></bc-icon>
        </div>
    </form>
</div>

